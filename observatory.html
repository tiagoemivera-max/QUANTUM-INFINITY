<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Space Observatory</title>
  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1724;
      --muted:#94a3b8;
      --accent:#7dd3fc;
      --accent-hover:#38bdf8;
      --error:#ef4444;
      --success:#22c55e;
      --warning:#f59e0b;
      --glass: rgba(255,255,255,0.03);
      --card: rgba(255,255,255,0.05);
      --radius:16px;
      color: #e6eef8;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    * { margin:0; padding:0; box-sizing: border-box; }
    
    body { 
      background: linear-gradient(180deg, #030712 0%, #0c1222 50%, #0a1628 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated starfield background */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle linear infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,0.02); border-radius: 4px; }
    ::-webkit-scrollbar-thumb { background: rgba(125,211,252,0.2); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(125,211,252,0.3); }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(11, 18, 32, 0.8);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 20px;
      color: var(--accent);
    }
    
    .nav-links {
      display: flex;
      gap: 32px;
      list-style: none;
    }
    
    .nav-links a {
      color: var(--muted);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
      position: relative;
    }
    
    .nav-links a:hover,
    .nav-links a.active {
      color: var(--accent);
    }
    
    .nav-links a.active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--accent);
      border-radius: 2px;
    }

    /* Main Content */
    .content {
      position: relative;
      z-index: 10;
      max-width: 1600px;
      margin: 0 auto;
      padding: 100px 24px 40px;
    }

    .app { 
      display:grid; 
      grid-template-columns: 1fr 420px; 
      gap:24px;
    }

    /* --- PANEL AND CARDS --- */
    .card { 
      background:var(--card); 
      border-radius:var(--radius); 
      padding:24px; 
      box-shadow: 0 8px 32px rgba(2,6,23,0.6); 
      overflow:hidden;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.06);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      border-color: rgba(125,211,252,0.15);
    }
    
    header { 
      display:flex; 
      gap:12px; 
      align-items:center; 
      margin-bottom:20px; 
      flex-wrap: wrap; 
    }
    header h1 { 
      font-size:24px; 
      margin:0; 
      font-weight:700;
      color: #fff;
    }

    .left { display:flex; flex-direction:column; gap:16px; }
    .map-wrap { 
      flex:1; 
      border-radius:12px; 
      overflow:hidden; 
      position:relative; 
      min-height:500px; 
      background:linear-gradient(180deg,#021025,#061428);
      border: 1px solid rgba(125,211,252,0.15);
      box-shadow: 0 0 40px rgba(125,211,252,0.1);
    }
    iframe { width:100%; height:100%; border:0; display:block; }

    /* --- BUTTONS AND STATUS --- */
    .overlay { 
      position:absolute; 
      top:16px; 
      left:16px; 
      z-index:10; 
      display:flex; 
      gap:12px; 
      flex-wrap: wrap;
      max-width: calc(100% - 32px);
    }
    
    button { 
      background:rgba(11, 18, 32, 0.85);
      backdrop-filter: blur(8px);
      color:var(--accent); 
      border:1px solid rgba(125,211,252,0.2); 
      padding:10px 18px; 
      border-radius:10px; 
      cursor:pointer; 
      font-weight:600;
      font-size: 14px;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    button:hover:not(:disabled) { 
      background:rgba(125,211,252,0.15); 
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(125,211,252,0.2);
    }
    button:active:not(:disabled) {
      transform: translateY(0);
    }
    button:disabled { 
      opacity:0.5; 
      cursor:not-allowed; 
    }

    .status { 
      font-size:13px; 
      color:var(--muted); 
      padding:10px 16px; 
      border-radius:10px; 
      background:rgba(11, 18, 32, 0.85);
      backdrop-filter: blur(8px);
      display:flex; 
      align-items:center; 
      gap:8px;
      border: 1px solid rgba(255,255,255,0.08);
      font-weight: 500;
    }
    .status.connected { 
      color: var(--success); 
      border-color: rgba(34,197,94,0.3);
      background: rgba(34,197,94,0.05);
    }
    .status.error { 
      color: var(--error); 
      border-color: rgba(239,68,68,0.3);
      background: rgba(239,68,68,0.05);
    }
    .status.connecting { 
      color: var(--warning); 
      border-color: rgba(245,158,11,0.3);
      background: rgba(245,158,11,0.05);
    }
    
    .status-dot { 
      width:8px; 
      height:8px; 
      border-radius:50%; 
      background:var(--muted);
    }
    .status.connected .status-dot { 
      background: var(--success); 
      animation: pulse 2s infinite;
    }
    .status.error .status-dot { background: var(--error); }
    .status.connecting .status-dot { 
      background: var(--warning);
      animation: pulse 1s infinite;
    }
    
    @keyframes pulse { 
      0%,100%{opacity:1; transform: scale(1);} 
      50%{opacity:0.5; transform: scale(0.9);} 
    }

    .right { display:flex; flex-direction:column; gap:16px; overflow: hidden; }
    .search-row { display:flex; gap:12px; align-items:center; }
    
    input[type="search"]{ 
      flex:1; 
      padding:12px 16px; 
      border-radius:10px; 
      border:1px solid rgba(255,255,255,0.1); 
      background:rgba(255,255,255,0.03); 
      color:inherit; 
      outline:none;
      font-size: 15px;
      transition: all 0.3s;
      font-weight: 500;
    }
    input[type="search"]:focus { 
      border-color: var(--accent);
      background:rgba(255,255,255,0.05);
      box-shadow: 0 0 0 3px rgba(125,211,252,0.1);
    }
    input[type="search"]::placeholder {
      color: var(--muted);
      opacity: 0.6;
    }

    /* --- NASA RESULTS --- */
    .results-container {
      flex: 1;
      overflow: auto;
      padding-right: 4px;
    }
    
    .grid { 
      display:grid; 
      grid-template-columns: repeat(2,1fr); 
      gap:12px;
    }
    
    .tile { 
      background:linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); 
      padding:12px; 
      border-radius:12px; 
      display:flex; 
      gap:12px; 
      cursor:pointer; 
      align-items:flex-start; 
      border:1px solid rgba(255,255,255,0.06);
      transition: all 0.3s ease;
    }
    .tile:hover { 
      background:linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04)); 
      border-color: rgba(125,211,252,0.4);
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(125,211,252,0.15);
    }
    .tile:active {
      transform: translateY(-1px);
    }
    
    .tile img{ 
      width:90px; 
      height:68px; 
      object-fit:cover; 
      border-radius:8px; 
      background:#000;
      flex-shrink: 0;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .tile-content {
      flex: 1;
      min-width: 0;
    }
    .tile-title { 
      font-weight:600; 
      font-size:14px; 
      margin-bottom:6px; 
      overflow:hidden; 
      text-overflow:ellipsis; 
      display:-webkit-box;
      -webkit-box-orient:vertical;
      -webkit-line-clamp:2;
      line-clamp:2;
      line-height: 1.4;
      color: #fff;
    }
    .meta{ 
      font-size:12px; 
      color:var(--muted);
      line-height: 1.4;
    }

    .big-preview { 
      margin-top: 12px;
      border-radius: 12px;
      overflow: hidden;
      background: #000;
      border: 1px solid rgba(125,211,252,0.3);
      box-shadow: 0 8px 24px rgba(125,211,252,0.2);
    }
    .big-preview img, .big-preview video { 
      width:100%; 
      max-height:40vh; 
      object-fit:contain; 
      display:block;
    }
    
    #metaBox {
      margin-top: 12px;
      padding: 16px;
      background: rgba(255,255,255,0.03);
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.6;
      border: 1px solid rgba(255,255,255,0.08);
    }
    #metaBox strong {
      color: var(--accent);
      display: block;
      margin-bottom: 8px;
      font-size: 15px;
    }
    
    .loading-spinner { 
      border:3px solid rgba(255,255,255,0.1); 
      border-top:3px solid var(--accent); 
      border-radius:50%; 
      width:48px; 
      height:48px; 
      animation: spin 0.8s linear infinite; 
      margin:60px auto;
    }
    @keyframes spin { 
      0%{transform:rotate(0deg);} 
      100%{transform:rotate(360deg);} 
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }
    .empty-state svg {
      width: 56px;
      height: 56px;
      margin-bottom: 16px;
      opacity: 0.4;
    }
    .empty-state p {
      font-size: 15px;
      line-height: 1.6;
    }

    #localInfo {
      position:absolute;
      right:16px;
      bottom:16px;
      background:rgba(11, 18, 32, 0.9);
      backdrop-filter: blur(10px);
      padding:16px;
      border-radius:12px;
      font-size: 14px;
      line-height: 1.8;
      border: 1px solid rgba(125,211,252,0.15);
      min-width: 220px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    }
    #localInfo > div {
      margin-bottom: 6px;
    }
    #localInfo > div:last-child {
      margin-bottom: 0;
    }

    /* --- RESPONSIVE --- */
    @media (max-width: 1200px) {
      .app {
        grid-template-columns: 1fr;
        gap: 24px;
      }
      .right {
        max-height: 600px;
      }
    }

    @media (max-width: 768px) {
      .nav-links {
        gap: 16px;
        font-size: 14px;
      }
      
      .content {
        padding: 90px 16px 24px;
      }
      
      .app {
        gap: 16px;
      }
      
      .card {
        padding: 16px;
      }
      
      header h1 {
        font-size: 20px;
      }
      
      .grid {
        grid-template-columns: 1fr;
      }
      
      .overlay {
        flex-direction: column;
        align-items: stretch;
      }
      
      button, .status {
        width: 100%;
      }
      
      .map-wrap {
        min-height: 400px;
      }
    }
  </style>
</head>
<body>
  <!-- Starfield background -->
  <div class="stars" id="starfield"></div>

  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 24 24" class="atom-logo">
          <!-- Núcleo central -->
          <circle cx="12" cy="12" r="2" fill="currentColor" opacity="1">
            <animate attributeName="r" values="2;2.5;2" dur="2s" repeatCount="indefinite"/>
          </circle>
          
          <!-- Órbita 1 (horizontal) -->
          <ellipse cx="12" cy="12" rx="9" ry="3" fill="none" stroke="currentColor" stroke-width="1" opacity="0.6">
            <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="3s" repeatCount="indefinite"/>
          </ellipse>
          
          <!-- Órbita 2 (diagonal 1) -->
          <ellipse cx="12" cy="12" rx="9" ry="3" fill="none" stroke="currentColor" stroke-width="1" opacity="0.6">
            <animateTransform attributeName="transform" type="rotate" from="60 12 12" to="420 12 12" dur="3s" repeatCount="indefinite"/>
          </ellipse>
          
          <!-- Órbita 3 (diagonal 2) -->
          <ellipse cx="12" cy="12" rx="9" ry="3" fill="none" stroke="currentColor" stroke-width="1" opacity="0.6">
            <animateTransform attributeName="transform" type="rotate" from="120 12 12" to="480 12 12" dur="3s" repeatCount="indefinite"/>
          </ellipse>
          
          <!-- Electrones -->
          <circle r="1.5" fill="currentColor" opacity="0.9">
            <animateMotion dur="3s" repeatCount="indefinite" path="M 12,12 m -9,0 a 9,3 0 1,0 18,0 a 9,3 0 1,0 -18,0"/>
          </circle>
          <circle r="1.5" fill="currentColor" opacity="0.9">
            <animateMotion dur="3s" repeatCount="indefinite" path="M 12,12 m -9,0 a 9,3 0 1,0 18,0 a 9,3 0 1,0 -18,0" begin="1s"/>
          </circle>
          <circle r="1.5" fill="currentColor" opacity="0.9">
            <animateMotion dur="3s" repeatCount="indefinite" path="M 12,12 m -9,0 a 9,3 0 1,0 18,0 a 9,3 0 1,0 -18,0" begin="2s"/>
          </circle>
        </svg>
        <span> <h3>Quantum Infinity</h3> </span>
      </div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="#" class="active">Observatory</a></li>
        <li><a href="index.html#info">Info</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="content">
    <div class="app">
      <!-- LEFT PANEL -->
      <div class="left card">
        <header>
          <h1>Interactive Observatory</h1>
        </header>

        <div class="map-wrap">
          <div class="overlay">
            <button id="btnConnect" aria-label="Connect with local Stellarium">Connect Stellarium</button>
            <div class="status" id="stellStatus" role="status" aria-live="polite">
              <span class="status-dot"></span>
              <span>Disconnected</span>
            </div>
          </div>
          <iframe id="stellIframe" src="https://stellarium-web.org/" title="Stellarium Web Engine - Interactive star map"></iframe>

          <div id="localInfo" style="display:none;">
            <div id="localCoords">📍 Coordinates: —</div>
            <div id="localTime">🕐 Time: —</div>
          </div>
        </div>
      </div>

      <!-- RIGHT PANEL -->
      <div class="right card">
        <header>
          <h1>🛰️ NASA Gallery</h1>
        </header>
        
        <div class="search-row">
          <input 
            id="searchInput" 
            type="search" 
            placeholder="Search: Mars, Hubble, ISS..."
            aria-label="Search NASA archive"
          >
          <button id="btnSearch" aria-label="Search">Search</button>
        </div>
        
        <div class="results-container">
          <div id="results" class="grid">
            <div class="empty-state">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
              <p>Search for planets, galaxies, space missions and more</p>
            </div>
          </div>
        </div>
        
        <div id="preview" class="big-preview" style="display:none;"></div>
        <div id="metaBox" style="display:none;"></div>
      </div>
    </div>
  </div>

  <script>
    // Generate animated starfield
    const starfield = document.getElementById('starfield');
    const starCount = 100;
    
    for (let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      
      const size = Math.random() * 2 + 1;
      const x = Math.random() * 100;
      const y = Math.random() * 100;
      const duration = Math.random() * 3 + 2;
      const delay = Math.random() * 5;
      
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      star.style.left = `${x}%`;
      star.style.top = `${y}%`;
      star.style.animationDuration = `${duration}s`;
      star.style.animationDelay = `${delay}s`;
      
      starfield.appendChild(star);
    }

    // Observatory functionality
    const CONFIG = {
      stellariumBase: "http://localhost:8090/api",
      nasaSearch: "https://images-api.nasa.gov/search",
      pollInterval: 5000,
      maxResults: 20
    };

    const UI = {
      btnConnect: document.getElementById("btnConnect"),
      stellStatus: document.getElementById("stellStatus"),
      localInfo: document.getElementById("localInfo"),
      localCoords: document.getElementById("localCoords"),
      localTime: document.getElementById("localTime"),
      btnSearch: document.getElementById("btnSearch"),
      searchInput: document.getElementById("searchInput"),
      results: document.getElementById("results"),
      preview: document.getElementById("preview"),
      metaBox: document.getElementById("metaBox")
    };

    let state = { stellariumConnected: false, pollTimer: null, lastSearch: "" };

    // CONNECT TO LOCAL STELLARIUM
    async function connectLocalStellarium() {
      if (state.stellariumConnected) return disconnectStellarium();
      
      UI.btnConnect.disabled = true;
      updateStatus('connecting', 'Connecting...');
      
      try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 3000);
        
        const viewRes = await fetch(`${CONFIG.stellariumBase}/main/view`, {
          signal: controller.signal
        });
        clearTimeout(timeoutId);
        
        if (!viewRes.ok) throw new Error('Invalid response');
        
        const view = await viewRes.json();
        state.stellariumConnected = true;
        updateStatus('connected', 'Connected');
        UI.localInfo.style.display = "block";
        UI.btnConnect.textContent = "Disconnect";
        updateStellariumData(view);
        startPolling();
      } catch (e) {
        console.error('Error connecting Stellarium:', e);
        const errorMsg = e.name === 'AbortError' 
          ? 'Timeout' 
          : 'Not available';
        updateStatus('error', errorMsg);
        UI.localInfo.style.display = "none";
        
        if (!sessionStorage.getItem('stellariumWarningShown')) {
          setTimeout(() => {
            if (!state.stellariumConnected) {
              alert('💡 To connect Stellarium:\n\n1. Download Stellarium from stellarium.org\n2. Enable the "Remote Control" plugin\n3. Make sure it\'s on port 8090\n\nIn the meantime, you can use Stellarium Web in the iframe.');
              sessionStorage.setItem('stellariumWarningShown', 'true');
            }
          }, 500);
        }
      } finally {
        UI.btnConnect.disabled = false;
      }
    }

    function disconnectStellarium() {
      state.stellariumConnected = false;
      stopPolling();
      updateStatus('disconnected', 'Disconnected');
      UI.localInfo.style.display = "none";
      UI.btnConnect.textContent = "Connect Stellarium";
    }

    function updateStatus(type, text) {
      const statusTypes = {
        'connecting': 'connecting',
        'connected': 'connected',
        'error': 'error',
        'disconnected': ''
      };
      
      UI.stellStatus.className = 'status ' + (statusTypes[type] || '');
      const textNode = UI.stellStatus.querySelector('span:last-child');
      if (textNode) textNode.textContent = text;
    }

    function updateStellariumData(view) {
      if (!view) return;
      
      const az = view.azimuth?.toFixed(1) || '—';
      const alt = view.altitude?.toFixed(1) || '—';
      UI.localCoords.textContent = `📍 Az: ${az}° / Alt: ${alt}°`;
      
      const now = new Date();
      UI.localTime.textContent = `🕐 ${now.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      })}`;
    }

    function startPolling() {
      if (state.pollTimer) return;
      state.pollTimer = setInterval(async () => {
        if (!state.stellariumConnected) return;
        try {
          const viewRes = await fetch(`${CONFIG.stellariumBase}/main/view`);
          if (!viewRes.ok) throw new Error();
          const view = await viewRes.json();
          updateStellariumData(view);
        } catch (e) {
          disconnectStellarium();
        }
      }, CONFIG.pollInterval);
    }

    function stopPolling() {
      if (state.pollTimer) {
        clearInterval(state.pollTimer);
        state.pollTimer = null;
      }
    }

    UI.btnConnect.addEventListener("click", connectLocalStellarium);

    // --- NASA SEARCH --- //
    async function searchNASA(term) {
      const cleanTerm = term.trim();
      if (!cleanTerm) {
        UI.searchInput.focus();
        return;
      }
      
      if (state.lastSearch === cleanTerm) return;
      state.lastSearch = cleanTerm;
      
      UI.results.innerHTML = '<div class="loading-spinner"></div>';
      UI.preview.style.display = 'none';
      UI.metaBox.style.display = 'none';
      
      try {
        const res = await fetch(
          `${CONFIG.nasaSearch}?q=${encodeURIComponent(cleanTerm)}&media_type=image,video`
        );
        
        if (!res.ok) throw new Error('Search error');
        
        const data = await res.json();
        const items = data.collection?.items || [];
        
        if (items.length === 0) {
          UI.results.innerHTML = `
            <div class="empty-state">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
              <p>No results found for "${cleanTerm}"</p>
            </div>
          `;
          return;
        }
        
        displayResults(items.slice(0, CONFIG.maxResults));
      } catch (err) {
        console.error('NASA API error:', err);
        UI.results.innerHTML = `
          <div class="empty-state" style="color: var(--error);">
            <p>❌ Error searching NASA API</p>
            <p style="font-size: 12px; margin-top: 8px;">Check your internet connection</p>
          </div>
        `;
      }
    }

    function displayResults(items) {
      UI.results.innerHTML = "";
      
      items.forEach(item => {
        const data = item.data?.[0] || {};
        const thumb = item.links?.[0]?.href || "";
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.setAttribute('role', 'button');
        tile.setAttribute('tabindex', '0');
        
        const title = escapeHtml(data.title || 'Untitled');
        const center = escapeHtml(data.center || 'NASA');
        const date = data.date_created?.slice(0,10) || '';
        
        tile.innerHTML = `
          <img src="${thumb}" alt="${title}" loading="lazy">
          <div class="tile-content">
            <div class="tile-title">${title}</div>
            <div class="meta">${center}${date ? ' • ' + date : ''}</div>
          </div>
        `;
        
        tile.onclick = () => showPreview(item);
        tile.onkeypress = (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            showPreview(item);
          }
        };
        
        UI.results.appendChild(tile);
      });
    }

    function showPreview(item) {
      const data = item.data?.[0];
      const link = item.links?.[0]?.href;
      const type = data.media_type;
      
      if (type === "video") {
        UI.preview.innerHTML = `<video src="${link}" controls autoplay></video>`;
      } else {
        UI.preview.innerHTML = `<img src="${link}" alt="${escapeHtml(data.title)}" loading="lazy">`;
      }
      
      UI.preview.style.display = "block";
      
      const description = data.description 
        ? escapeHtml(data.description).slice(0, 300) + (data.description.length > 300 ? '...' : '')
        : 'No description available';
      
      UI.metaBox.innerHTML = `
        <strong>${escapeHtml(data.title)}</strong>
        ${description}
      `;
      UI.metaBox.style.display = "block";
      
      UI.preview.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Event listeners
    UI.btnSearch.addEventListener("click", () => searchNASA(UI.searchInput.value));
    
    UI.searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        searchNASA(UI.searchInput.value);
      }
    });

    window.addEventListener('load', () => {
      setTimeout(() => {
        if (!state.lastSearch) {
          UI.searchInput.placeholder = "Try: Hubble, Mars rover, Moon...";
        }
      }, 1000);
    });
  </script>
</body>
</html>